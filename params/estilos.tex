\lstset{
     inputencoding=utf8,
     frame=Ltb,
     framerule=0pt,
     aboveskip=0.5cm,
     framextopmargin=3pt,
     framexbottommargin=3pt,
     framexleftmargin=0.4cm,
     framesep=0pt,
     rulesep=.4pt,
     backgroundcolor=\color{gray97},
     rulesepcolor=\color{black},
     %
     stringstyle=\ttfamily\color{orange},
     showstringspaces = false,
     basicstyle=\footnotesize\ttfamily,
     commentstyle=\color{green},
     keywordstyle=\bfseries\color{blue},
     %
     numbers=left,
     numbersep=15pt,
     numberstyle=\tiny, 
     numberfirstline = false,
     breaklines=true,
     %
     tabsize=2,
     %
     literate=
     {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
     {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
     {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
     {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
     {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
     {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
     {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
     {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
     {ã}{{\~a}}1 {ẽ}{{\~e}}1 {ĩ}{{\~i}}1 {õ}{{\~o}}1 {ũ}{{\~u}}1
     {Ã}{{\~A}}1 {Ẽ}{{\~E}}1 {Ĩ}{{\~I}}1 {Õ}{{\~O}}1 {Ũ}{{\~U}}1
     {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
     {ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1
     {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
     {€}{{\euro}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
     {»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1 {¡}{{!`}}1
}

% Colors
%----------------------------------------------------------------------
% From ``named colors'' palette:
\definecolor{lightcyan1}{rgb}{0.88, 1   , 1}    % 224, 255, 255
\definecolor{lightcyan2}{rgb}{0.82, 0.93, 0.93} % 209, 238, 238
\definecolor{lightcyan3}{rgb}{0.7,  0.80, 0.80} % 180, 205, 205
\definecolor{lightcyan4}{rgb}{0.48, 0.55, 0.55} % 122, 139, 139
\definecolor{lightcyan5}{rgb}{0.27, 0.31, 0.31} %  69,  79,  79
% Reserved words' color (in programs)
\definecolor{codecolor}{rgb}{0,0,0.3}
% Other colors
\definecolor{green}{rgb}{0,.5,0}
\definecolor{lightgray}{gray}{0.94}
\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
%======================================================================


%Texto justificado sin wrapping de palabras (no afecta a lstlistings)
\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000

\interfootnotelinepenalty=10000 %Notas largas a pie de página